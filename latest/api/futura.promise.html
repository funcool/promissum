<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><title>futura.promise documentation</title></head><body><header><section class="title"><h1><a href="index.html">Futura Api Documentation</a></h1></section><small>Version: 0.3.0</small></header><section class="container"><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>futura</span></div></div></li><li class="depth-2 branch"><a href="futura.atomic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>atomic</span></div></a></li><li class="depth-2 branch"><a href="futura.executor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>executor</span></div></a></li><li class="depth-2 branch current"><a href="futura.promise.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>promise</span></div></a></li><li class="depth-2"><a href="futura.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-3 branch"><a href="futura.stream.channel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>channel</span></div></a></li><li class="depth-3 branch"><a href="futura.stream.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3 branch"><a href="futura.stream.promise.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>promise</span></div></a></li><li class="depth-3"><a href="futura.stream.pushstream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pushstream</span></div></a></li></ul></div><section class="namespace-docs" id="content"><h2 class="anchor" id="top">futura.promise</h2><div class="doc"><div class="markdown"><p>A promise implementation for Clojure that uses jdk8 completable futures behind the scenes.</p></div></div><div class="public anchor" id="var-all"><h3><a href="#var-all">all</a></h3><div class="usage"><code>(all promises)</code></div><div class="doc"><div class="markdown"><p>Given an array of promises, return a promise that is resolved when all the items in the array are resolved.</p></div></div></div><div class="public anchor" id="var-any"><h3><a href="#var-any">any</a></h3><div class="usage"><code>(any promises)</code></div><div class="doc"><div class="markdown"><p>Given an array of promises, return a promise that is resolved when first one item in the array is resolved.</p></div></div></div><div class="public anchor" id="var-catch"><h3><a href="#var-catch">catch</a></h3><div class="usage"><code>(catch p callback)</code></div><div class="doc"><div class="markdown"><p>Catch all promise chain helper.</p></div></div></div><div class="public anchor" id="var-deliver"><h3><a href="#var-deliver">deliver</a></h3><div class="usage"><code>(deliver p)</code><code>(deliver p v)</code></div><div class="doc"><div class="markdown"><p>Mark the promise as completed or rejected with optional value.</p><p>If value is not specified <code>nil</code> will be used. If the value is instance of <code>Throwable</code> the promise will be rejected.</p></div></div></div><div class="public anchor" id="var-done.3F"><h3><a href="#var-done.3F">done?</a></h3><div class="usage"><code>(done? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is done independently if successfully o exceptionally.</p></div></div></div><div class="public anchor" id="var-IPromise"><h3><a href="#var-IPromise">IPromise</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A basic promise abstraction.</p></div></div></div><div class="public anchor" id="var-IPromiseState"><h3><a href="#var-IPromiseState">IPromiseState</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Additional state related abstraction.</p></div></div></div><div class="public anchor" id="var-pending.3F"><h3><a href="#var-pending.3F">pending?</a></h3><div class="usage"><code>(pending? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is stil in pending state.</p></div></div></div><div class="public anchor" id="var-promise"><h3><a href="#var-promise">promise</a></h3><div class="usage"><code>(promise)</code><code>(promise v)</code></div><div class="doc"><div class="markdown"><p>A promise constructor.</p><p>This is a polymorphic function and this is a list of possible arguments:</p>
<ul>
  <li>throwable</li>
  <li>plain value</li>
  <li>factory function</li>
</ul><p>In case of the initial value is instance of <code>Throwable</code>, rejected promise will be retrned. In case of a plain value (not throwable), a resolved promise will be returned. And finally, if a function or any callable is provided, that function will be executed with one argument as callback for mark the promise resolved or rejected.</p>
<pre><code>(promise (fn [deliver]
           (future
             (Thread/sleep 200)
             (deliver 1))))
</code></pre><p>The body of that function can be asynchronous and the promise can be freely resolved in other thread.</p></div></div></div><div class="public anchor" id="var-promise-.3Efuture"><h3><a href="#var-promise-.3Efuture">promise-&gt;future</a></h3><div class="usage"><code>(promise-&gt;future p)</code></div><div class="doc"><div class="markdown"><p>Converts a promise in a CompletableFuture instance.</p></div></div></div><div class="public anchor" id="var-promise.3F"><h3><a href="#var-promise.3F">promise?</a></h3><div class="usage"><code>(promise? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if <code>p</code> is a promise instance.</p></div></div></div><div class="public anchor" id="var-reason"><h3><a href="#var-reason">reason</a></h3><div class="usage"><code>(reason p)</code></div><div class="doc"><div class="markdown"><p>Get the rejection reason of this promise. Throws an error if the promise isn&rsquo;t rejected.</p></div></div></div><div class="public anchor" id="var-rejected.3F"><h3><a href="#var-rejected.3F">rejected?</a></h3><div class="usage"><code>(rejected? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is completed exceptionally.</p></div></div></div><div class="public anchor" id="var-resolved"><h3><a href="#var-resolved">resolved</a></h3><div class="usage"><code>(resolved v)</code></div><div class="doc"><div class="markdown"><p>Return a promise in a resolved state with given <code>v</code> value.</p></div></div></div><div class="public anchor" id="var-resolved.3F"><h3><a href="#var-resolved.3F">resolved?</a></h3><div class="usage"><code>(resolved? p)</code></div><div class="doc"><div class="markdown"><p>Returns true if promise <code>p</code> is completed successfully.</p></div></div></div><div class="public anchor" id="var-then"><h3><a href="#var-then">then</a></h3><div class="usage"><code>(then p callback)</code></div><div class="doc"><div class="markdown"><p>A chain helper for promises.</p></div></div></div></section></section></body></html>